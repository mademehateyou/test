

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/css.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
</head>
<body>
    
    <main id="slides-container">
  <!-- First slide: Video -->
  <section class="slide slide-video">
    <video autoplay muted playsinline id="bg-video">
      <source src="video/1111.mp4" type="video/mp4">
      <source src="video/2222.mp4" type="video/mp4">
    </video>
  </section>

  <section class="slide"></section>
  <section class="slide"></section>
  <section class="slide"></section>

  <!-- Last (footer) slide - put countdown here -->
  <section class="slide slide-footer">
    <div id="countdown">
  <span id="days">--</span>
  <span id="hours">--</span>
  <span id="minutes">--</span>
  <span id="seconds">--</span>
</div>
  </section>
</main>

<button id="slideToggleBtn" aria-label="Next slide">
  <span class="arrow-wrapper">
    <img id="arrowIcon" src="images/pb.png" alt="arrow">
  </span>
</button>


<script>const slides = document.querySelectorAll('.slide');
const toggleBtn = document.getElementById('slideToggleBtn');
const arrowIcon = document.getElementById('arrowIcon');

let currentSlideIndex = 0;
let rotation = 180; // start arrow flipped

// Initial arrow rotation
arrowIcon.style.transform = `rotate(${rotation}deg)`;

// Toggle between **first** and **last** slide
toggleBtn.addEventListener('click', () => {
  currentSlideIndex = currentSlideIndex === 0 ? slides.length - 1 : 0;
  slides[currentSlideIndex].scrollIntoView({ behavior: 'smooth' });

  // Rotate arrow one way
  rotation += 180;
  arrowIcon.style.transform = `rotate(${rotation}deg)`;
});

// VIDEO SWITCHING
const videoPlayer = document.getElementById("bg-video");
const sources = ["video/1111.mp4", "video/2222.mp4"];
let currentVideoIndex = 0;

function playVideo(index) {
  videoPlayer.src = sources[index];
  videoPlayer.play();
}

// Start first video
playVideo(currentVideoIndex);

// Switch video on end
videoPlayer.addEventListener("ended", () => {
  currentVideoIndex = (currentVideoIndex + 1) % sources.length;
  playVideo(currentVideoIndex);
});
</script>

<div id="countdown">--d --h --m --s</div>

<script>
// compact helper: resolve wall-clock in IANA zone to a UTC timestamp (binary search)
function zonedLocalToTs(y,m,d,h,minute=0,second=0, tz='Europe/Kyiv') {
  const dtf = new Intl.DateTimeFormat('en-US', {
    timeZone: tz, year:'numeric', month:'2-digit', day:'2-digit',
    hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:false
  });
  const target = { year:y, month:m, day:d, hour:h, minute, second };
  const partsFor = ts => {
    const parts = dtf.formatToParts(new Date(ts));
    const map = {};
    for (const p of parts) if (p.type!=='literal') map[p.type]=Number(p.value);
    return map;
  };
  let base = Date.UTC(y, m-1, d, h, minute, second);
  let low = base - 36*3600e3, high = base + 36*3600e3;
  while (low <= high) {
    const mid = Math.floor((low+high)/2);
    const p = partsFor(mid);
    const cmp = (p.year-target.year)||(p.month-target.month)||(p.day-target.day)||
                (p.hour-target.hour)||(p.minute-target.minute)||(p.second-target.second);
    if (cmp===0) return mid;
    if (cmp < 0) low = mid + 1; else high = mid - 1;
  }
  throw new Error('Intl lookup failed');
}

// get next Tuesday 21:00 in Kyiv
function nextTuesday21KyivTs() {
  const tz='Europe/Kyiv';
  const now = new Date();
  const parts = new Intl.DateTimeFormat('en-US',{
    timeZone:tz, year:'numeric', month:'2-digit', day:'2-digit',
    hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:false
  }).formatToParts(now).reduce((acc,p)=> (p.type!=='literal'? (acc[p.type]=Number(p.value),acc):acc),{});
  const weekdayStr = new Intl.DateTimeFormat('en-US',{timeZone:tz, weekday:'short'}).format(now);
  const wmap = { Sun:0, Mon:1, Tue:2, Wed:3, Thu:4, Fri:5, Sat:6 };
  let delta = (2 - wmap[weekdayStr] + 7) % 7;
  if (delta === 0) { // today Tuesday: keep today if before 21:00
    const after = (parts.hour > 21) || (parts.hour === 21 && (parts.minute>0 || parts.second>0));
    if (after) delta = 7;
  }
  const baseKyivDate = new Date(Date.UTC(parts.year, parts.month-1, parts.day));
  baseKyivDate.setUTCDate(baseKyivDate.getUTCDate() + delta);
  return zonedLocalToTs(baseKyivDate.getUTCFullYear(),
                        baseKyivDate.getUTCMonth()+1,
                        baseKyivDate.getUTCDate(),
                        21,0,0,tz);
}

// render loop
(function(){
  const el = document.getElementById('countdown');
  let target = nextTuesday21KyivTs();
  function fmt(n){return String(n).padStart(2,'0');}
  function tick(){
    const now = Date.now();
    if (now >= target) target = nextTuesday21KyivTs();
    let diff = Math.max(0, target - now);
    const days = Math.floor(diff / 86400000); diff -= days*86400000;
    const hours = Math.floor(diff / 3600000); diff -= hours*3600000;
    const minutes = Math.floor(diff / 60000); diff -= minutes*60000;
    const seconds = Math.floor(diff / 1000);
    el.textContent = `${fmt(days)}d ${fmt(hours)}h ${fmt(minutes)}m ${fmt(seconds)}s`;
  }
  tick();
  setInterval(tick, 1000);
})();
</script>



</body>
</html>








